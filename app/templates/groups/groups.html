{% extends "base.html" %} {% load static %} {% block js %}
<script src="{% static 'js/groups.js' %}" defer></script>
{% endblock %} {% block content %} {% if isAdmin %}
<section class="card shadow p-5 mb-5">
  <h2 class="text-center mb-3">Allgemeine Gruppen</h2>
  <div id="group-container">
    {% for group in global_groups %}
    <div class="group card shadow" data-id="{{ group.id }}">
      <img src="{{ group.icon.url }}" />
      <div class="group-information">
        <h2 class="mb-3">{{ group.name }}</h2>
        <div>
          <button
            class="btn btn-danger pl-3 pr-3 pt-2 pb-2"
            data-id="{{ group.id }}"
            onclick="onDeleteGroupClicked(event)"
          >
            <i class="fa-solid fa-trash"></i>
          </button>
          <button class="btn btn-primary pl-3 pr-3 pt-2 pb-2">
            <i class="fa-solid fa-pen"></i>
          </button>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</section>
{% endif %}

<section class="card shadow p-5">
  <h2 class="text-center mb-3">Deine Gruppen</h2>
  <div id="group-container">
    {% for user_group in user_groups %}
    <div class="group card shadow" data-id="{{ user_group.id }}">
      <img src="{{ user_group.icon.url }}" />
      <div class="group-information">
        <h2 class="mb-3">{{ user_group.name }}</h2>
        <div>
          <button
            class="btn btn-danger pl-3 pr-3 pt-2 pb-2"
            data-id="{{ user_group.id }}"
            onclick="onDeleteGroupClicked(event)"
          >
            <i class="fa-solid fa-trash"></i>
          </button>
          <button class="btn btn-primary pl-3 pr-3 pt-2 pb-2">
            <i class="fa-solid fa-pen"></i>
          </button>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</section>

<dialog id="confirm-group-deletion-dialog" name="group-deletion">
  <div class="content">
    <header>
      <h1>Gruppe wirklich löschen?</h1>
    </header>
    <div class="body form-row">
      <div class="col-md">
        <p>
          Bist Du sicher, dass Du diese Gruppe löschen willst? Diese Aktion ist dauerhaft
          und kann nicht rückgängig gemacht werden.
        </p>
      </div>
    </div>
    <footer>
      <button
        type="submit"
        class="btn btn-primary pl-5 pr-5"
        onclick="onDeleteGroupConfirmed(event)"
      >
        Ja, löschen
      </button>
      <button
        type="cancel"
        class="btn btn-danger pl-4 pr-4"
        onclick="onDeleteGroupAborted(event)"
      >
        Nein, abbrechen
      </button>
    </footer>
  </div>
</dialog>

<script>
  const DELETE_GROUP_URL = "{% url 'delete_group' 1 %}";
  const CSRF_MIDDLEWARE_TOKEN = "{{ csrf_token }}";
</script>

{% endblock %}
